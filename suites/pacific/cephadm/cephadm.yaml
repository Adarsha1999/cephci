tests:
  - test:
      name: Install ceph pre-requisites
      desc: installation of ceph pre-requisites
      module: install_prereq.py
      abort-on-fail: true
  - test:
      name: Cephadm Bootstrap
      desc: cephadm cluster bootstrap
      module: test_cephadm.py
      polarion-id:
      config:
        registry: false
        bootstrap: true
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Add Host
      desc: Add host to Bootstrapped Cluster
      module: test_cephadm.py
      polarion-id:
      config:
        op: host
        service_type: "add"
        extra_args:
          nodes: ['node2']
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Add host
      desc: Add new host node with IP address
      module: test_cephadm.py
      polarion-id:
      config:
        op: host
        service_type: "add"
        extra_args:
          nodes: ['node3']
          attach_address: true
          add_label: false
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Add host
      desc: Add new host node with IP address and labels
      module: test_cephadm.py
      polarion-id:
      config:
        op: host
        service_type: "add"
        extra_args:
          nodes: ['node4']
          attach_address: true
          add_label: true
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Remove Host label
      desc: Remove host label(s) from existing node
      module: test_cephadm.py
      polarion-id:
      config:
        op: host
        service_type: "remove_label"
        extra_args:
          nodes: ['node4']
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Add Host label
      desc: Add host label(s) to existing node
      module: test_cephadm.py
      polarion-id:
      config:
        op: host
        service_type: "add_label"
        extra_args:
          nodes: ['node2']
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Attach Host label to installer
      desc: Add host label(s) to existing installer node
      module: test_cephadm.py
      polarion-id:
      config:
        op: host
        service_type: "add_label"
        extra_args:
          nodes: ['node1']
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Set Host address
      desc: Set IP address to a existing node
      module: test_cephadm.py
      polarion-id:
      config:
        op: host
        service_type: "set_address"
        extra_args:
          nodes: ['node1']
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Remove host
      desc: Remove node from cluster
      module: test_cephadm.py
      polarion-id:
      config:
        op: host
        service_type: "remove"
        extra_args:
          nodes: ['node2']
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Remove Hosts
      desc: Remove node from cluster
      module: test_cephadm.py
      polarion-id:
      config:
        op: host
        service_type: "remove"
        extra_args:
          nodes: []
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Add host
      desc: Add all host node with IP address and labels
      module: test_cephadm.py
      polarion-id:
      config:
        op: host
        service_type: "add"
        extra_args:
          nodes: []
          attach_address: true
          add_label: true
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Apply Monitor Service
      desc: Apply monitor service on all mon nodes
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "mon"
        extra_args:
            nodes: ["node1", "node2", "node6"]
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Apply Manager Service
      desc: Apply manager service on all mgr nodes
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "mgr"
        extra_args:
          nodes: ["node1"]
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Apply OSD Service
      desc: Apply OSD service with all available devices
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "osd"
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Apply MDS Service
      desc: Apply MDS service on all mds nodes
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "mds"
        extra_args:
          nodes: ["node2"]
          file_system: 'cephfs'
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Apply ISCSI Service
      desc: Apply ISCSI target service on iscsi role nodes
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "iscsi"
        extra_args:
          nodes: ["node8"]
          pool_name: "iscsi"
          pool_pg_num: 3
          pool_pgp_num: 3
          api_user: "User1"
          api_password: "passWord"
          trusted_ip_list: ["1.1.1.1", "2.2.2.2"]
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Apply Prometheus Service
      desc: Apply Prometheus service on role nodes
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "prometheus"
        extra_args:
          nodes: ["node1"]
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Apply Node-exporter Service
      desc: Apply Node-exporter service on role nodes
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "node-exporter"
        extra_args:
          nodes: []
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Apply Alert-manager Service
      desc: Apply Alert-manager service on alertmanager role nodes
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "alertmanager"
        extra_args:
          nodes: ["node1", "node2"]
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Apply Grafana Service
      desc: Apply Grafana service on role nodes
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "grafana"
        extra_args:
          nodes: ["node1"]
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Apply RGW Service
      desc: Apply RGW service on all rgw nodes
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "rgw"
        extra_args:
          nodes: ["node6", "node7"]
          realm: realm
          zone: zone
      destroy-cluster: false
      abort-on-fail: false
  - test:
      name: Remove RGW Service
      desc: Remove RGW service using orch remove option
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: remove
        extra_args:
          service_name: "rgw.realm.zone"
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Remove ISCSI Service
      desc: Remove ISCSI service using orch remove option
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "remove"
        extra_args:
          service_name: "iscsi.iscsi"
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Remove Prometheus Service
      desc: Remove Prometheus service using orch remove option
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "remove"
        extra_args:
          service_name: "prometheus"
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Remove Node-exporter Service
      desc: Remove Node-exporter service using orch remove option
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "remove"
        extra_args:
          service_name: "node-exporter"
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Remove Alert-manager Service
      desc: Remove Alert-manager service using orch remove option
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "remove"
        extra_args:
          service_name: "alertmanager"
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Remove Grafana Service
      desc: Remove Grafana service using orch remove option
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "remove"
        extra_args:
          service_name: "grafana"
      destroy-cluster: false
      abort-on-fail: true
  - test:
      name: Remove MDS Service
      desc: Remove MDS service using orch remove option
      module: test_cephadm.py
      polarion-id:
      config:
        op: apply
        service_type: "remove"
        extra_args:
          service_name: 'mds.cephfs'
      destroy-cluster: false
      abort-on-fail: true
